# Напишите приложение, которое по REST принимает запрос вида
```POST api/v1/wallet```
```  
{  
valletId: UUID,  
operationType: DEPOSIT or WITHDRAW,  
amount: 1000  
}  
```  

#### после выполнять логику по изменению счета в базе данных
#### также есть возможность получить баланс кошелька
```GET api/v1/wallets/{WALLET_UUID}```

## стек:
1) Golang
2) Postgresql
3) Docker

#### Обратите особое внимание проблемам при работе в конкурентной среде (1000 RPS по одному кошельку). Ни один запрос не должен быть не обработан (50Х error)
#### Приложение должно запускаться в докер контейнере, база данных тоже, вся система должна подниматься с помощью docker-compose
#### Необходимо покрыть приложение тестами
#### Переменные окружения должны считываться из файла config.env

<hr>

# Технические решения для повышения скорости обработки информации и надёжности

### Для быстрого доступа получения информации о балансе используется кэширование при помощи Redis
### Для быстрой обработки полученных транзаций пополнения или снятия используется журналирвоание при помощи Kafka
### Для послеующей обработки используется пул воркеров
### Для качественной обработки операций по одному кошельку используется sync.Map с мьютексами для кадого UUID кошелька
### Если во все воркеры попали транзакции по однмому кошельку - они отработают последовательно. Если нет - конкуррентно
### Из-за применения sync.Map с мьютексами для кадого кошелька нам не требуется Serializable уровень изоляции транзакции
### В случае, если транзакция на отработала по причине конфликта версионирования - она снова помещается в очередь брокера
### В случае, если транзакция не может быть выплнена по причине нехватки средств для снятия - она запишется в БД со стутусом Failed
### При необзодомости можно дописать ручку, которая будет отобрадать все транзакции по кошельку с их статусами



<hr>

# Как запускаться
```bash
docker-compose up -d
```

# Ручки

### Создать кошелёк
```
POST http://localhost:8080/api/v1/wallet/create
```

### Новая транзакция на счёт кошелька
```
POST http://localhost:8080/api/v1/wallet
```

Поправил орфографию тэга с "**v**alletId" на "**w**alletId"

```json 
{
  "walletId": "UUID",
  "operationType": "DEPOSIT" or "WITHDRAW",
  "amount": 1000
}  
``` 

### Получить баланс кошелька
```
GET http://localhost:8080/api/v1/wallets/{WALLET_UUID}
```
### Swagger
```
http://localhost:8080/api/v1/swagger/index.html
```
### PProf
```
http://localhost:8081/debug/pprof/
```

### Метрики
```
http://localhost:8082/metrics
```


#### В микросервис захардкожены CORS, позволяющие делать запросы из любого источника для доступа к Swagger 